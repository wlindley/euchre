JsMockito={version:"1.0.4",_export:["isMock","when","verify","verifyZeroInteractions","verifyNoMoreInteractions","spy"],isMock:function(a){return typeof a._jsMockitoVerifier!="undefined"},when:function(a){return a._jsMockitoStubBuilder()},verify:function(b,a){return(a||JsMockito.Verifiers.once()).verify(b)},verifyZeroInteractions:function(){JsMockito.each(arguments,function(a){JsMockito.Verifiers.zeroInteractions().verify(a)})},verifyNoMoreInteractions:function(){JsMockito.each(arguments,function(a){JsMockito.Verifiers.noMoreInteractions().verify(a)})},spy:function(a){return(typeof a=="function")?JsMockito.mockFunction(a):JsMockito.mock(a)},contextCaptureFunction:function(b,c){var a=function(){return a.apply(b,Array.prototype.slice.call(arguments,0))};a.call=function(d){return a.apply(d,Array.prototype.slice.call(arguments,1))};a.apply=function(e,d){return c.apply(this,[e,d||[]])};return a},matchArray:function(a,b){if(a.length>b.length){return false}return !JsMockito.any(a,function(d,c){return !d.matches(b[c])})},toMatcher:function(a){return JsHamcrest.isMatcher(a)?a:JsHamcrest.Matchers.equalTo(a)},mapToMatchers:function(a){return JsMockito.map(a,function(b){return JsMockito.toMatcher(b)})},verifier:function(a,b){JsMockito.Verifiers[a]=function(){JsMockito.Verifier.apply(this,arguments)};JsMockito.Verifiers[a].prototype=new JsMockito.Verifier;JsMockito.Verifiers[a].prototype.constructor=JsMockito.Verifiers[a];JsMockito.extend(JsMockito.Verifiers[a].prototype,b)},each:function(c,b){for(var a=0;a<c.length;a++){b(c[a],a)}},eachObject:function(b,c){for(var a in b){c(b[a],a)}},extend:function(b,a){for(var c in a){b[c]=a[c]}return b},objectKeys:function(b){var a=[];JsMockito.eachObject(b,function(d,c){a.push(c)});return a},objectValues:function(b){var a=[];JsMockito.eachObject(b,function(d,c){a.push(d)});return a},map:function(c,b){var a=[];JsMockito.each(c,function(e,d){var f=b(e,d);if(f!=null){a.push(f)}});return a},mapObject:function(b,c){var a={};JsMockito.eachObject(b,function(e,d){var f=c(e,d);if(f!=null){a[d]=f}});return a},mapInto:function(b,a,c){return JsMockito.extend(b,JsMockito.mapObject(a,function(e,d){return c(e,d)}))},grep:function(c,b){var a=[];JsMockito.each(c,function(e,d){if(b(e,d)){a.push(e)}});return a},find:function(c,b){for(var a=0;a<c.length;a++){if(b(c[a],a)){return c[a]}}return undefined},any:function(b,a){return(this.find(b,a)!=undefined)}};JsMockito.mockFunction=function(e,b){if(typeof e=="function"){b=e;e=undefined}e=e||"func";b=b||function(){};var d=[];var f=[];var c=function(){var h=[this];h.push.apply(h,arguments);f.push({args:h});var g=JsMockito.find(d,function(k){return JsMockito.matchArray(k[0],h)});if(g==undefined){return b.apply(this,arguments)}var j=g[1];if(j.length==0){return undefined}var i=j[0];if(j.length>1){j.shift()}return i.apply(this,arguments)};c.prototype=b.prototype;c._jsMockitoStubBuilder=function(g){var g=g||JsHamcrest.Matchers.anything();return a(g,function(h){var i=[h,[]];d.unshift(i);return{then:function(){i[1].push.apply(i[1],arguments);return this},thenReturn:function(){return this.then.apply(this,JsMockito.map(arguments,function(j){return function(){return j}}))},thenThrow:function(j){return this.then.apply(this,JsMockito.map(arguments,function(k){return function(){throw k}}))}}})};c._jsMockitoVerifier=function(g,h){var h=h||JsHamcrest.Matchers.anything();return a(h,function(i){return g(e,f,i,i[0]!=h)})};c._jsMockitoMockFunctions=function(){return[c]};return c;function a(h,g){return JsMockito.contextCaptureFunction(h,function(k,j){var i=JsMockito.mapToMatchers([k].concat(j||[]));return g(i)})}};JsMockito._export.push("mockFunction");JsMockito.mock=function(d){var g={};if(typeof d!="function"){g=d;d=function(){};d.prototype=g;d.prototype.constructor=d}var e=function(){};e.prototype=new d;e.prototype.constructor=e;var f=new e();var h={};var a={};var b=JsHamcrest.Matchers.sameAs(f);var c=function(k){var l;if(g[k]!=undefined){l=function(){var m=(this==f)?g:this;return g[k].apply(m,arguments)}}f[k]=JsMockito.mockFunction("obj."+k,l);h[k]=f[k]._jsMockitoStubBuilder;a[k]=f[k]._jsMockitoVerifier};for(var j in f){if(j!="constructor"){c(j)}}for(var i in JsMockito.nativeTypes){if(f instanceof JsMockito.nativeTypes[i].type){JsMockito.each(JsMockito.nativeTypes[i].methods,function(k){c(k)})}}f._jsMockitoStubBuilder=function(){return JsMockito.mapInto(new e(),h,function(k){return k.call(this,b)})};f._jsMockitoVerifier=function(k){return JsMockito.mapInto(new e(),a,function(l){return l.call(this,k,b)})};f._jsMockitoMockFunctions=function(){return JsMockito.objectValues(JsMockito.mapObject(f,function(k){return JsMockito.isMock(k)?k:null}))};return f};JsMockito._export.push("mock");JsMockito.nativeTypes={Array:{type:Array,methods:["concat","join","pop","push","reverse","shift","slice","sort","splice","toString","unshift","valueOf"]},Boolean:{type:Boolean,methods:["toString","valueOf"]},Date:{type:Date,methods:["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCMonth","getUTCFullYear","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCMonth","setUTCFullYear","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","setYear","toDateString","toGMTString","toLocaleDateString","toLocaleTimeString","toLocaleString","toString","toTimeString","toUTCString","valueOf"]},Number:{type:Number,methods:["toExponential","toFixed","toLocaleString","toPrecision","toString","valueOf"]},String:{type:String,methods:["anchor","big","blink","bold","charAt","charCodeAt","concat","fixed","fontcolor","fontsize","indexOf","italics","lastIndexOf","link","match","replace","search","slice","small","split","strike","sub","substr","substring","sup","toLowerCase","toUpperCase","valueOf"]},RegExp:{type:RegExp,methods:["compile","exec","test"]}};JsMockito.Verifiers={_export:["never","zeroInteractions","noMoreInteractions","times","once"],never:function(){return new JsMockito.Verifiers.Times(0)},zeroInteractions:function(){return new JsMockito.Verifiers.ZeroInteractions()},noMoreInteractions:function(){return new JsMockito.Verifiers.NoMoreInteractions()},times:function(a){return new JsMockito.Verifiers.Times(a)},once:function(){return new JsMockito.Verifiers.Times(1)}};JsMockito.Verifier=function(){this.init.apply(this,arguments)};JsMockito.Verifier.prototype={init:function(){},verify:function(a){var b=this;return a._jsMockitoVerifier(function(){b.verifyInteractions.apply(b,arguments)})},verifyInteractions:function(c,d,a,b){},updateVerifiedInteractions:function(a){JsMockito.each(a,function(b){b.verified=true})},buildDescription:function(d,e,a,b){var c=new JsHamcrest.Description();c.append(d+": "+e+"(");JsMockito.each(a.slice(1),function(g,f){if(f>0){c.append(", ")}c.append("<");g.describeTo(c);c.append(">")});c.append(")");if(b){c.append(", 'this' being ");a[0].describeTo(c)}return c}};JsMockito.verifier("Times",{init:function(a){this.wanted=a},verifyInteractions:function(f,e,a,b){var g=JsMockito.grep(e,function(h){return JsMockito.matchArray(a,h.args)});if(g.length==this.wanted){this.updateVerifiedInteractions(g);return}var d;if(g.length==0){d="Wanted but not invoked"}else{if(this.wanted==0){d="Never wanted but invoked"}else{if(this.wanted==1){d="Wanted 1 invocation but got "+g.length}else{d="Wanted "+this.wanted+" invocations but got "+g.length}}}var c=this.buildDescription(d,f,a,b);throw c.get()}});JsMockito.verifier("ZeroInteractions",{verify:function(a){var b=JsMockito.Verifiers.never();JsMockito.each(a._jsMockitoMockFunctions(),function(c){b.verify(c)()})}});JsMockito.verifier("NoMoreInteractions",{verify:function(a){var b=this;JsMockito.each(a._jsMockitoMockFunctions(),function(c){JsMockito.Verifier.prototype.verify.call(b,c)()})},verifyInteractions:function(e,d,a,b){var f=JsMockito.grep(d,function(g){return g.verified!=true});if(f.length==0){return}var c=this.buildDescription("No interactions wanted, but "+f.length+" remains",e,a,b);throw c.get()}});JsMockito.Integration={importTo:function(a){JsMockito.each(JsMockito._export,function(b){a[b]=JsMockito[b]});JsMockito.each(JsMockito.Verifiers._export,function(b){a[b]=JsMockito.Verifiers[b]})},screwunit:function(){JsMockito.Integration.importTo(Screw.Matchers)},JsTestDriver:function(){JsMockito.Integration.importTo(window)},JsUnitTest:function(){JsMockito.Integration.importTo(JsUnitTest.Unit.Testcase.prototype)},YUITest:function(){JsMockito.Integration.importTo(window)},QUnit:function(){JsMockito.Integration.importTo(window)},jsUnity:function(){JsMockito.Integration.importTo(jsUnity.env.defaultScope)},jSpec:function(){JsMockito.Integration.importTo(jSpec.defaultContext)}};